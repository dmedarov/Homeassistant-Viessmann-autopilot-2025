# configuration_2031.01.yaml – VIESSMANN AUTOPILOT 2031.01 PERFECTION – ИЗЧИСТЕНА РАБОТЕЩА ВЕРСИЯ
# 05.12.2025 → Всички грешки са отстранени – ГОТОВ ЗА ДИРЕКТНО КОПИРАНЕ

default_config:
frontend:
  themes: !include_dir_merge_named themes
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
python_script:

# Proxmox VE (по желание)
proxmoxve:
  - host: 192.168.0.33
    username: root@pam
    password: !secret proxmox_password
    realm: pam
    verify_ssl: false
    nodes:
      - node: pve
        vms:
          - 100
          - 101

# InfluxDB 1.x
influxdb:
  host: 192.168.0.35
  port: 8086
  ssl: false
  verify_ssl: false
  api_version: 1
  username: homeassistant
  password: !secret influxdb_password
  database: homeassistant
  max_retries: 3
  default_measurement: state
  measurement_attr: unit_of_measurement
  tags:
    source: HA
  tags_attributes:
    - friendly_name
    - unit_of_measurement
  ignore_attributes:
    - icon
    - source
    - options
    - editable
    - step
    - mode
    - preset_modes
    - supported_features
    - effect_list
    - attribution
    - device_class
    - state_class
  exclude:
    domains:
      - automation
      - scene
      - script
      - update
      - camera
      - light
      - media_player
      - fan
  include:
    entities: &influx_entities
      - sensor.bedroom_damian_temperature
      - sensor.bedroom_damian_humidity
      - sensor.bedroom_honey_temperature
      - sensor.bedroom_honey_humidity
      - sensor.downstairs_temperature
      - sensor.downstairs_humidity
      - sensor.home_living_room_temperature
      - sensor.home_living_room_humidity
      - sensor.home_living_room_pressure
      - sensor.home_living_room_noise
      - sensor.home_living_room_co2
      - sensor.alex_room_temperature
      - sensor.garage_temperature
      - sensor.garage_humidity
      - sensor.garden_temperature
      - sensor.house_avg_temperature
      - sensor.house_min_temperature
      - sensor.indoor_temperature_avg
      - sensor.outdoor_temperature
      - sensor.cu401b_s_outside_temperature
      - sensor.cu401b_s_compressor_hours
      - sensor.cu401b_s_compressor_starts
      - sensor.cu401b_s_supply_temperature
      - sensor.cu401b_s_return_temperature
      - binary_sensor.cu401b_s_frost_protection
      - binary_sensor.viessmann_compressor_running
      - number.cu401b_s_heating_curve_slope
      - number.cu401b_s_heating_curve_shift
      - number.cu401b_s_normal_temperature
      - number.cu401b_s_reduced_temperature
      - input_number.heating_offset_dynamic
      - input_number.comfort_target_temp
      - input_number.sleep_target_temp
      - input_number.heating_base_slope
      - input_number.heating_cold_slope
      - input_boolean.heating_preheat_48h_force
      - input_boolean.heating_weekend_mode_auto
      - sensor.heating_pi_integral
      - sensor.pi_integral_living
      - sensor.pi_integral_downstairs
      - sensor.pi_integral_damian
      - sensor.pi_integral_honey
      - sensor.pi_integral_alex
      - sensor.pv_boost_smoothed
      - sensor.long_comfort_counter
      - sensor.compressor_runtime_today
      - sensor.compressor_runtime_protection
      - sensor.forecast_min_72h
      - sensor.forecast_min_96h
      - sensor.solar_forecast_score_72h
      - sensor.power_production_now
      - sensor.energy_production_today_remaining
      - sensor.heating_current_mode_2030
      - sensor.viessmann_autopilot_log_2030
      - device_tracker.damian_iphone_14
      - calendar.blgarski_ofitsialni_praznitsi_2025_2030
      - sensor.autopilot_persistent
      - sensor.compressor_current_runtime
      - sensor.compressor_daily_minutes
      - sensor.compressor_season_minutes
      - sensor.compressor_last_day
      - sensor.current_hour
      - sensor.current_minute
      - sensor.current_day
      - sensor.current_month
      - sensor.current_year
      - sensor.day_of_week
      - sensor.gps_debug_info
      - sensor.viessmann_system_limits
      - sensor.overheating_severity_index
      - sensor.temperature_imbalance
      - sensor.shift_effectiveness
      - sensor.supply_headroom

# =====================================================
# TEMPLATE СЕНЗОРИ – ПЪЛНА РАБОТЕЩА ВЕРСИЯ (2025.12+)
# =====================================================
template: !include template.yaml
    
